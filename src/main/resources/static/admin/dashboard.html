<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Administraci√≥n - LMS</title>
    <link rel="stylesheet" href="../css/admin-dashboard.css">
</head>
<body>
    <nav>
        <h1>Panel de Administraci√≥n</h1>
        <button onclick="logout()">Cerrar Sesi√≥n</button>
    </nav>

    <div class="admin-container">
        <!-- Men√∫ lateral -->
        <aside class="sidebar">
            <div class="sidebar-menu">
                <button class="menu-item active" onclick="mostrarSeccion('usuarios')">
                    <span class="menu-icon">üë•</span>
                    <span class="menu-text">Usuarios</span>
                </button>
                <button class="menu-item" onclick="mostrarSeccion('materias')">
                    <span class="menu-icon">üìö</span>
                    <span class="menu-text">Materias</span>
                </button>
                <button class="menu-item" onclick="mostrarSeccion('categorias')">
                    <span class="menu-icon">üìë</span>
                    <span class="menu-text">Categor√≠as</span>
                </button>
                <button class="menu-item" onclick="mostrarSeccion('reportes')">
                    <span class="menu-icon">üìã</span>
                    <span class="menu-text">Reportes</span>
                </button>
            </div>
        </aside>

        <!-- Contenido principal -->
        <div class="admin-panel">
        <!-- Gesti√≥n de Usuarios -->
        <section id="usuarios-section">
            <h2>Gesti√≥n de Usuarios</h2>
            <button onclick="mostrarFormularioUsuario()">Nuevo Usuario</button>
            <div id="formulario-usuario" style="display: none;">
                <h3>Crear Usuario</h3>
                <form id="userForm">
                    <select id="userType" required>
                        <option value="">Seleccione tipo de usuario</option>
                        <option value="administrador">Administrador</option>
                        <option value="profesor">Profesor</option>
                        <option value="estudiante">Estudiante</option>
                    </select>
                    <input type="text" id="nombre" placeholder="Nombre" required>
                    <input type="email" id="correo" placeholder="Correo electr√≥nico" required>
                    <input type="password" id="contrasena" placeholder="Contrase√±a" required>
                    <button type="submit">Crear Usuario</button>
                </form>
            </div>
            <div id="lista-usuarios">
                <h3>Lista de Usuarios</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Correo</th>
                            <th>Rol</th>
                            <th>Nombre</th>
                            <th>Email</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="usuarios-tabla">
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Gesti√≥n de Materias -->
        <section id="materias-section">
            <h2>Gesti√≥n de Materias</h2>
            <button onclick="mostrarFormularioMateria()">Nueva Materia</button>
            <div id="formulario-materia" style="display: none;">
                <h3>Crear Materia</h3>
                <form id="materiaForm">
                    <input type="text" id="nombreMateria" placeholder="Nombre de la materia" required>
                    <select id="categoriaMateria" required>
                        <option value="">Seleccione categor√≠a</option>
                    </select>
                    <button type="submit">Crear Materia</button>
                </form>
            </div>
            <div id="lista-materias">
                <h3>Lista de Materias</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Nombre</th>
                            <th>Categor√≠a</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="materias-tabla">
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Gesti√≥n de Categor√≠as -->
        <section id="categorias-section">
            <h2>Gesti√≥n de Categor√≠as</h2>
            <button onclick="mostrarFormularioCategoria()">Nueva Categor√≠a</button>
            <div id="formulario-categoria" style="display: none;">
                <h3>Crear Categor√≠a</h3>
                <form id="categoriaForm">
                    <input type="text" id="nombreCategoria" placeholder="Nombre de la categor√≠a" required>
                    <button type="submit">Crear Categor√≠a</button>
                </form>
            </div>
            <div id="lista-categorias">
                <h3>Lista de Categor√≠as</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Nombre</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="categorias-tabla">
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Gesti√≥n de Reportes -->
        <section id="reportes-section">
            <h2>üìã Gesti√≥n de Reportes</h2>
            
            <!-- Filtros de reportes -->
            <div class="reportes-filtros">
                <button class="filtro-btn active" onclick="filtrarReportes('todos')">
                    Todos <span id="count-todos" class="badge">0</span>
                </button>
                <button class="filtro-btn" onclick="filtrarReportes('Pendiente')">
                    ‚è≥ Pendientes <span id="count-pendientes" class="badge badge-warning">0</span>
                </button>
                <button class="filtro-btn" onclick="filtrarReportes('En Revisi√≥n')">
                    üîç En Revisi√≥n <span id="count-revision" class="badge badge-info">0</span>
                </button>
                <button class="filtro-btn" onclick="filtrarReportes('Resuelto')">
                    ‚úÖ Resueltos <span id="count-resueltos" class="badge badge-success">0</span>
                </button>
                <button class="filtro-btn" onclick="filtrarReportes('Rechazado')">
                    ‚ùå Rechazados <span id="count-rechazados" class="badge badge-danger">0</span>
                </button>
            </div>

            <!-- Lista de reportes -->
            <div id="lista-reportes">
                <h3>Reportes</h3>
                <div id="reportes-container">
                    <p class="no-data" id="no-reportes">No hay reportes para mostrar</p>
                </div>
            </div>
        </section>

        <!-- Modal para ver detalles del reporte -->
        <div id="modal-detalle-reporte" class="modal" style="display: none;">
            <div class="modal-content modal-large">
                <span class="modal-close" onclick="cerrarModalDetalleReporte()">&times;</span>
                <h3>üìã Detalles del Reporte</h3>
                
                <div class="reporte-detalle">
                    <div class="detalle-row">
                        <strong>ID del Reporte:</strong>
                        <span id="detalle-id"></span>
                    </div>
                    <div class="detalle-row">
                        <strong>Estado Actual:</strong>
                        <span id="detalle-estado" class="badge"></span>
                    </div>
                    <div class="detalle-row">
                        <strong>Reportado por:</strong>
                        <span id="detalle-usuario"></span>
                    </div>
                    <div class="detalle-row">
                        <strong>Motivo:</strong>
                        <span id="detalle-motivo"></span>
                    </div>
                    
                    <hr>
                    
                    <h4>üìÑ Contenido Reportado</h4>
                    <div class="detalle-row">
                        <strong>T√≠tulo:</strong>
                        <span id="detalle-contenido-titulo"></span>
                    </div>
                    <div class="detalle-row">
                        <strong>Tipo:</strong>
                        <span id="detalle-contenido-tipo"></span>
                    </div>
                    <div class="detalle-row">
                        <strong>Descripci√≥n:</strong>
                        <span id="detalle-contenido-descripcion"></span>
                    </div>
                    <div class="detalle-row">
                        <strong>Materia:</strong>
                        <span id="detalle-contenido-materia"></span>
                    </div>
                    
                    <hr>
                    
                    <h4>‚öôÔ∏è Acciones</h4>
                    <div class="acciones-reporte">
                        <label for="select-estado">Cambiar Estado:</label>
                        <select id="select-estado">
                            <option value="Pendiente">‚è≥ Pendiente</option>
                            <option value="En Revisi√≥n">üîç En Revisi√≥n</option>
                            <option value="Resuelto">‚úÖ Resuelto</option>
                            <option value="Rechazado">‚ùå Rechazado</option>
                        </select>
                        <button class="btn-submit" onclick="cambiarEstadoReporte()">
                            Actualizar Estado
                        </button>
                    </div>
                    
                    <div class="acciones-contenido">
                        <button class="btn-download" onclick="descargarContenidoReportado()">
                            üì• Descargar Contenido
                        </button>
                        <button class="btn-delete-content" onclick="eliminarContenidoReportado()">
                            üóëÔ∏è Eliminar Contenido
                        </button>
                        <button class="btn-delete-report" onclick="eliminarReporteActual()">
                            ‚ùå Eliminar Reporte
                        </button>
                    </div>
                </div>
            </div>
            </div>
        </div>
    </div>

    <script src="../js/api.js"></script>
    <script src="../js/admin.js"></script>
    <script src="../js/admin-reportes.js"></script>
</body>
</html>